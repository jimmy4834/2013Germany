<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>2013歐洲行</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" href="style.css" type="text/css" media="screen"/>
		<script type="text/javascript" src="jquery.min.js"></script>
    </head>

    <body>
		<div id="st_main" class="st_main">
			<img src="images/album/Switzerland/10.jpg" alt="" class="st_preview" style="display:none;"/>
			<div class="st_overlay"></div>
			<h1></h1>
			<div id="st_loading" class="st_loading"><span>Loading...</span></div>
            <div id="st_menubar" class="st_menubar"></div>
			<div id="st_more" class="st_more"></div>
			<div id="st_text" class="st_text">
				<p>少女峰 Jungfrau</p>
			</div>
			<ul id="st_nav" class="st_navigation">
				<li class="album">
					<span class="st_link">London<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/London/1.jpg" alt="白金漢宮 Buckingham Palace"/>
							<img src="images/album/thumbs/London/2.jpg" alt="皇家騎兵博物館 The Household Cavalry Museum/國會大廈 Palace of Westminster"/>
							<img src="images/album/thumbs/London/3.jpg" alt="倫敦塔橋 Tower Bridge"/>
							<img src="images/album/thumbs/London/4.jpg" alt="大英博物館 British Museum"/>
						</div>
					</div>
				</li>
				<li class="album">
					<span class="st_link">Berlin, Dresden, Prague<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/East/1.jpg" alt="柏林大教堂 Berliner Dom"/>
							<img src="images/album/thumbs/East/2.jpg" alt="柏林熊/柏林圍牆"/>
							<img src="images/album/thumbs/East/3.jpg" alt="柏林大教堂 Berliner Dom"/>
							<img src="images/album/thumbs/East/4.jpg" alt="德國國會大廈 Reichstag"/>
							<img src="images/album/thumbs/East/5.jpg" alt="布蘭登堡門 Brandenburger Tor"/>
							<img src="images/album/thumbs/East/6.jpg" alt="德勒斯登 宮廷教堂 Katholische Hofkirche"/>
							<img src="images/album/thumbs/East/7.jpg" alt="布拉格 Prague"/>
							<img src="images/album/thumbs/East/8.jpg" alt="布拉格 Prague"/>
						</div>
					</div>
				</li>
				<li class="album">
					<span class="st_link">Netherlands, Belgium<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/Benelux/1.jpg" alt="風 車村 Zaanse Schans"/>
							<img src="images/album/thumbs/Benelux/2.jpg" alt="風 車村 Zaanse Schans"/>
							<img src="images/album/thumbs/Benelux/3.jpg" alt="風 車村 Zaanse Schans"/>
							<img src="images/album/thumbs/Benelux/4.jpg" alt="風 車村 Zaanse Schans"/>
							<img src="images/album/thumbs/Benelux/5.jpg" alt="艾登 Edam"/>
							<img src="images/album/thumbs/Benelux/6.jpg" alt="沃倫丹 Volendam"/>
							<img src="images/album/thumbs/Benelux/7.jpg" alt="馬肯 Marken"/>
							<img src="images/album/thumbs/Benelux/8.jpg" alt="馬肯 Marken"/>
							<img src="images/album/thumbs/Benelux/9.jpg" alt="馬德羅丹小人國 Madurodam"/>
							<img src="images/album/thumbs/Benelux/10.jpg" alt="馬德羅丹小人國 Madurodam"/>
							<img src="images/album/thumbs/Benelux/11.jpg" alt="馬德羅丹小人國 Madurodam"/>
							<img src="images/album/thumbs/Benelux/12.jpg" alt="方塊屋 Kijkkubus"/>
							<img src="images/album/thumbs/Benelux/13.jpg" alt="布魯塞爾街景 Brussel"/>
							<img src="images/album/thumbs/Benelux/14.jpg" alt="馬斯垂克 Maastricht"/>
						</div>
					</div>
				</li>
				<li class="album">
					<span class="st_link">Switzerland<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/Switzerland/1.jpg" alt="瀑布鎮 Lauterbrunnen"/>
							<img src="images/album/thumbs/Switzerland/2.jpg" alt="琉森 卡貝爾橋 Kapellbrücke"/>
							<img src="images/album/thumbs/Switzerland/3.jpg" alt="琉森 穆塞格城墙 Museggmauer"/>
							<img src="images/album/thumbs/Switzerland/4.jpg" alt="瀑布鎮 Lauterbrunnen"/>
							<img src="images/album/thumbs/Switzerland/5.jpg" alt="瀑布鎮 Lauterbrunnen"/>
							<img src="images/album/thumbs/Switzerland/6.jpg" alt="少女峰登山火車"/>
							<img src="images/album/thumbs/Switzerland/7.jpg" alt="少女峰登山火車"/>
							<img src="images/album/thumbs/Switzerland/8.jpg" alt="少女峰 Jungfrau"/>
							<img src="images/album/thumbs/Switzerland/9.jpg" alt="少女峰 Jungfrau"/>
							<img src="images/album/thumbs/Switzerland/10.jpg" alt="少女峰 Jungfrau"/>
						</div>
					</div>
				</li>
				<li class="album">
					<span class="st_link">Konigssee, Munich<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/South/1.jpg" alt="國王湖 Konigssee"/>
							<img src="images/album/thumbs/South/2.jpg" alt="國王湖山區"/>
							<img src="images/album/thumbs/South/3.jpg" alt="紅蔥頭教堂 St. Bartholomä"/>
							<img src="images/album/thumbs/South/4.jpg" alt="國王湖 Konigssee"/>
							<img src="images/album/thumbs/South/5.jpg" alt="往冰洞的路上"/>
							<img src="images/album/thumbs/South/6.jpg" alt="冰洞 Eishöhle"/>
							<img src="images/album/thumbs/South/7.jpg" alt="慕尼黑啤酒節"/>
							<img src="images/album/thumbs/South/8.jpg" alt="慕尼黑啤酒節"/>
						</div>
					</div>
				</li>
				<li class="album">
					<span class="st_link">Others<span class="st_arrow_down"></span></span>
					<div class="st_wrapper st_thumbs_wrapper">
						<div class="st_thumbs">
							<img src="images/album/thumbs/Others/1.jpg" alt="煙火節 Dortmund Lichterfest"/>
							<img src="images/album/thumbs/Others/2.jpg" alt="希臘餐廳燭光晚餐 Restaurant Syrtaki"/>
							<img src="images/album/thumbs/Others/3.jpg" alt="Oberhausen LEGO Land/紅點博物館"/>
							<img src="images/album/thumbs/Others/4.jpg" alt="Gamescom 2013 in Köln"/>
							<img src="images/album/thumbs/Others/5.jpg" alt="科隆大教堂 Cologne Cathedral"/>
							<img src="images/album/thumbs/Others/6.jpg" alt="漢堡碼頭 Hamburg Landungsbrücken"/>
							<img src="images/album/thumbs/Others/7.jpg" alt="漢堡碼頭/漢堡吉祥物"/>
							<img src="images/album/thumbs/Others/8.jpg" alt="倉庫城 Speicherstadt"/>
							<img src="images/album/thumbs/Others/9.jpg" alt="法蘭克福 歐元大廈/海德堡 老橋"/>
							<img src="images/album/thumbs/Others/10.jpg" alt="TU Dortumund校園"/>
						</div>
					</div>
				</li>
				<li>
					<span class="st_link">About<span class="st_arrow_down"></span></span>
					<div class="st_about st_thumbs_wrapper">
						<div class="st_subcontent">
							<p>
								2013年夏天，我們在歐洲度過了三個月的生活，走過了許多地方，留下了許多回憶。即使記憶會隨時光淡去，但希望當我們再看到這些相片時，能回想起那些快樂的點點滴滴。
							</p>
						</div>
					</div>
				</li>
			</ul>
		</div>

        <!-- The JavaScript -->
        <script type="text/javascript">
            $(function() {
				//the loading image
				var $loader		= $('#st_loading');
				//the ul element 
				var $list		= $('#st_nav');
				//the current image being shown
				var $currImage 	= $('#st_main').children('img:first');
				
                var $overlay = $('.st_overlay');
				//let's load the current image 
				//and just then display the navigation menu
				$('<img>').load(function(){
					$loader.hide();
					$currImage.fadeIn(3000);
					//slide out the menu
					//setTimeout(function(){
					//	$list.animate({'left':'-100px'},500);
					//},
					//1000);
				}).attr('src',$currImage.attr('src'));
				
				//calculates the width of the div element 
				//where the thumbs are going to be displayed
				buildThumbs();
				
				function buildThumbs(){
					$list.children('li.album').each(function(){
						var $elem 			= $(this);
						var $thumbs_wrapper = $elem.find('.st_thumbs_wrapper');
						var $thumbs 		= $thumbs_wrapper.children(':first');
						//each thumb has 180px and we add 3 of margin
						var finalW 			= $thumbs.find('img').length * 183;
						$thumbs.css('width',finalW + 'px');
						//make this element scrollable
						makeScrollable($thumbs_wrapper,$thumbs);
					});
				}
				
				//clicking on the menu items (up and down arrow)
				//makes the thumbs div appear, and hides the current 
				//opened menu (if any)
				$list.find('.st_arrow_down').live('click',function(){
					var $this = $(this);
					hideThumbs();
					$this.addClass('st_arrow_up').removeClass('st_arrow_down');
					var $elem = $this.closest('li');
					$elem.addClass('current').animate({'height':'170px'},200);
					var $thumbs_wrapper = $this.parent().next();
					$thumbs_wrapper.show(200);
                    $overlay.animate({'opacity':'0.3'});
				});
				$list.find('.st_arrow_up').live('click',function(){
					var $this = $(this);
					$this.addClass('st_arrow_down').removeClass('st_arrow_up');
					hideThumbs();
                    $overlay.animate({'opacity':'0'});
				});
				
				var menuopen = 0;
				$('.st_menubar').bind('mouseenter',function(){
					if(menuopen==0){
						$list.stop().animate({'left':'0px'});
						menuopen = 1;
					}
					else{
						$list.stop().animate({'left':'-300px'});
						hideThumbs();
						$overlay.animate({'opacity':'0'});
						menuopen = 0;
					}
				});
				
				var textopen = 0;
				$('.st_more').bind('mouseenter',function(){
					if(textopen==0){
						$('.st_text').stop().animate({'top':'0px'});
						textopen = 1;
					}
					else{
						$('.st_text').stop().animate({'top':'-100px'});
						textopen = 0;
					}
				});
				
				//clicking on a thumb, replaces the large image
				$list.find('.st_thumbs img').bind('click',function(){
					var $this = $(this);
					var pathstr = $this.attr('src');			
					$loader.show();
					$('<img class="st_preview"/>').load(function(){
						var $this = $(this);
						var $currImage = $('#st_main').children('img:first');
						$this.insertBefore($currImage);
						$loader.hide();
						$currImage.fadeOut(2000,function(){
							$(this).remove();
						});
					}).attr('src',pathstr.replace("thumbs/", ""));
					$('.st_text').text($this.attr('alt'));
				}).bind('dblclick',function(){
					var $this = $(this);
					var pathstr = $this.attr('src');
					$loader.show();
					$('<img class="st_preview"/>').load(function(){
						var $this = $(this);
						var $currImage = $('#st_main').children('img:first');
						$this.insertBefore($currImage);
						$loader.hide();
						$currImage.fadeOut(2000,function(){
							$(this).remove();
						});
					}).attr('src',pathstr.replace("thumbs/", ""));
					$list.stop().animate({'left':'-300px'});
					hideThumbs();
					$overlay.animate({'opacity':'0'});
				}).bind('mouseenter',function(){
					$(this).stop().animate({'opacity':'1'});
				}).bind('mouseleave',function(){
					$(this).stop().animate({'opacity':'0.7'});
				});
				
				//function to hide the current opened menu
				function hideThumbs(){
					$list.find('li.current')
						 .animate({'height':'50px'},400,function(){
							$(this).removeClass('current');
						 })
						 .find('.st_thumbs_wrapper')
						 .hide(200)
						 .andSelf()
						 .find('.st_link span')
						 .addClass('st_arrow_down')
						 .removeClass('st_arrow_up');
				}

				//makes the thumbs div scrollable
				//on mouse move the div scrolls automatically
				function makeScrollable($outer, $inner){
					var extra 			= 800;
					//Get menu width
					var divWidth = $outer.width();
					//Remove scrollbars
					$outer.css({
						overflow: 'hidden'
					});
					//Find last image in container
					var lastElem = $inner.find('img:last');
					$outer.scrollLeft(0);
					//When user move mouse over menu
					$outer.unbind('mousemove').bind('mousemove',function(e){
						var containerWidth = lastElem[0].offsetLeft + lastElem.outerWidth() + 2*extra;
						var left = (e.pageX - $outer.offset().left) * (containerWidth-divWidth) / divWidth - extra;
						$outer.scrollLeft(left);
					});
				}
            });
        </script>
    </body>
</html>